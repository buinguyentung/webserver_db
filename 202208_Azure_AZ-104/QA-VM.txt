Virtual Machine

+ Quota (ex. vCPU) based on the total number of cores in use both allocated and deallocated.
+ DNS server port 53; Web server port 80; RDP port 3389 TCP;
+ While resizing, the VM must be in a stopped state, therefore there will be a downtime.
+ VM and VMSS should be in same resource group and same location.

//===
You have an Azure subscription named Subscription1 that contains the quotas shown in the following table.
	Standard BS family vCPUs	WestUS	0 of 20
	Standard D family vCPUs		WestUS	0 of 20
	Total regional vCPUs		WestUS	0 of 20
You deploy virtual machines to Subscription1 as shown in the following table.
	VM1	Standard_B2ms	2 vCPUs		WestUS	Running
	VM2	Standard_B16ms	16 vCPUs	WestUS	Stopped (deallocated)
You plan to deploy the virtual machines shown in the following table.
	VM3	Standard_B2ms	1
	VM4	Standard_D4s_v3	4
	VM5	Standard_B16ms	16
For each of the following statements, select Yes if the statement is true. Otherwise, select No.
	You can deploy VM3 to West US	=> YES
	You can deploy VM4 to West US	=> NO
	You can deploy VM5 to West US	=> NO
Explanation
Total regional vCPUs = 20
2 vCPUs (VM1) + 16 vCPUs (VM20) = 18 vCPUs, which means that only 2 vCPUs left to exceed usage limit.
We can add 1 vCPU. 2 vCPUs (VM1) + 16 vCPUs (VM20) + 1 vCPU (VM3) = 19 vCPUs

//===
You plan to deploy several Azure virtual machines that will run Windows Server 2019 in a virtual machine scale set by using an Azure Resource Manager template.
You need to ensure that NGINX is available on all the virtual machines after they are deployed.
What should you use?
	A. the Publish-AzADDscConfiguration cmdlet
	B. Azure Application Insights
	C. Azure Custom Script Extension
	D. the New-AzConfigurationAssignment cmdlet
Explanation
Correct Answer: C
With an Azure Custom Script extension you can push the NGINX installation after VMs are created using the Resource manager template.
Note:
There are several versions of this question in the exam. The question has two correct answers:
1. a Desired State Configuration (DSC) extension
2. Azure Custom Script Extension

//===
You need to ensure that VM1 can be created in an Availability Zone.
Which two settings should you modify?
	A. Use managed disks
	B. OS disk type
	C. Availability options
	D. Size
	E. Image
Explanation
Correct Answer: AC
A. Use managed disks
Your VMs should use managed disks if you want to move them to an Availability Zone by using Site Recovery.
C. Availability options
When you create a VM for an Availability Zone, Under Settings > High availability, select one of the numbered zones from the Availability zone dropdown.

//=== TEST-4
Your company has three virtual machines (VMs) that are included in an availability set.
You try to resize one of the VMs, which returns an allocation failure message.
It is imperative that the VM is resized.
Which of the following actions should you take?
	A. You should only stop one of the VMs
	B. You should stop two of the VMs
	C. You should stop all three VMs
	D. You should remove the necessary VM from the availability set
Explanation
Correct Answer: C
If the VM you wish to resize is part of an availability set, then you must stop all VMs in the availability set before changing the size of any VM in the availability set.
The reason all VMs in the availability set must be stopped before performing the resize operation to a size that requires different hardware is that all running VMs in the availability set must be using the same physical hardware cluster. 

//===
You have an Azure virtual machine (VM) that has a single data disk. You have been tasked with attaching this data disk to another Azure VM.
You need to make sure that your strategy allows for the virtual machines to be offline for the least amount of time possible.
Which of the following is the action you should take FIRST?
	A. Stop the VM that includes the data disk
	B. Stop the VM that the data disk must be attached to
	C. Detach the data disk
	D. Delete the VM that includes the data disk
Explanation
Correct Answer: C
You can simply detach a data disk from one VM and attach it to the other VM without stopping either of the VMs.
You can only attach a data disk to a VM that is running

//===
You have an Azure subscription that contains an Azure Availability Set named WEBPROD-AS-USE2 as shown in the following exhibit.
	"platformFaultDomainCount": 2,
	"platformUpdateDomainCount": 10
You add 14 virtual machines to WEBPROD-AS-USE2.
* When Microsoft performs planned maintenance in East US 2, the maximum number of unavailable virtual machines will be ..........
	A. 2 
	B. 7
	C. 10
	D. 14
Correct Answer: A
There are 10 update domains. The 14 VMs are shared across the 10 update domains so four update domains will have two VMs and six update domains will have one VM. Only one update domain is rebooted at a time. Therefore, a maximum of two VMs will be offline.

* If the server rack in the Azure datacenter that hosts WEBPROD-AS-USE2 experiences a power failure, the maximum number of unavailable virtual machines will be ..........
Correct Answer: B
There are 2 fault domains. The 14 VMs are shared across the 2 fault domains, so 7 VMs in each fault domain. A rack failure will affect one fault domain so 7 VMs will be offline.

//===
You have an Azure subscription that contains 10 virtual networks. The virtual networks are hosted in separate resource groups.
Another administrator plans to create several network security groups (NSGs) in the subscription.
You need to ensure that when an NSG is created, it automatically blocks TCP port 8080 between the virtual networks.

* You create a resource lock, and then you assign the lock to the subscription. => NO

* You assign a built-in policy definition to the subscription. => NO

* You configure a custom policy definition, and then you assign the policy to the subscription. => YES

//===
//===
//===
